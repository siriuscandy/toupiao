<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
<title>麦朵尔</title>
<link rel="stylesheet" href="css/mui.min.css">
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/swiper.min.css">
</head>

<body>
	<div class="content zpxqCon">
		<div class="aui-week t-line">
            <div class="swiper-container" id="swiper-container" alt="Image description">
            <div class="my-gallery swiper-wrapper " data-bind="foreach: data().images">
                <div class="swiper-slide"  >
					<img  data-bind="attr:{'src':$data}"/>
				</div>
		    
                            
            </div>
	<div class="swiper-pagination pagination1"></div>
    <div class="gbBnt"><a href="wdzp.html"><img src="img/icon1.png"></a></div>
</div>   
        </div>
        <div class="cpxqCon">
        	作品说明：<em data-bind="data().detail"></em>
        </div>
        <div style="height:50px"></div>
        <nav class="mui-bar mui-bar-tab">
            <div class="t-line">
                <a href="wdzp.html" class="aui-tab-item mui-active">
                    <span class="mui-tab-label">我的作品</span>
                </a>
                <a href="index.html" class="aui-tab-item" >
                    <span class="mui-tab-label">报名投稿</span>
                </a>
                <a class="aui-tab-item" href="csgz.html">
                    <span class="mui-tab-label">参赛规则</span>
                </a>
            </div>
        </nav>
    </div>
    <style>
        .swiper-wrapper{ height: 220px; overflow: hidden}
    </style>
<script src="js/mui.min.js"></script>
<script src="js/swiper.min.js"></script>
<script src="../admin/trd/jquery/jquery.2.1.4.min.js"></script>
<script src="../admin/trd/knockout/knockout-3.2.0.min.js"></script>
<script>
    var viewModel = {
        data : ko.observable(),
    };
    var Myid = GetQueryString("id");
    var listUrl  =  '/vote/myworks/detail/';
    viewModel.load = function(){
        viewModel.userId = window.sessionStorage.myuserId;
        viewModel.getiList();
        var swiper = new Swiper('#swiper-container', {
        autoplay:3000,
        pagination: '.pagination1',
        paginationClickable: true,
        mode: 'vertical'
      });
    };
     var dialogmin = function(content,time){
            if(time==undefined){time = 2000;    }
			var dialogdiv = "<div class='dialogmin'><span>"+content+"</span></div>";
			$('body').append(dialogdiv);
			setTimeout(function(){
				$(".dialogmin").remove();
			},time)
	};
    viewModel.getiList = function(pageIndex){
        var queryData = {
            id:Myid
        };
        $.ajax({
            type : 'get',
            dataType : 'json',
            async : false,
            data : queryData,
            url : listUrl + Myid,
            contentType:"application/json",
            success : function(res) {
                if (res.status==1){
                    viewModel.data(res.data);
                }else{
                    dialogmin(res.msg);
                }
            },
            error : function(XMLHttpRequest, textStatus, errorThrown) {
                dialogmin("网络错误!!");
            }
        });
       
    }
    
    viewModel.load(); 
    
    ko.applyBindings(viewModel);
    function GetQueryString(name)
  {
    var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
    var r = window.location.search.substr(1).match(reg);
    if(r!=null)return  unescape(r[2]); return null;
  };
</script>

</body>
</html>
